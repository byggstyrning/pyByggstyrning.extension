<Window 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Generate 3D View References"
    Width="800"
    Height="600"
    WindowStartupLocation="CenterScreen"
    ShowInTaskbar="False"
    ResizeMode="CanResize">
    
    <!-- Styles will be loaded programmatically -->
    
    <Grid Margin="10">
        <!-- Busy Indicator Overlay -->
        <Border x:Name="busyOverlay" Style="{StaticResource BusyOverlayStyle}">
            <StackPanel Style="{StaticResource BusyContentStyle}">
                <ProgressBar x:Name="busyProgressBar" Style="{StaticResource BusyProgressBarStyle}"/>
                <TextBlock x:Name="busyTextBlock" Style="{StaticResource BusyTextBlockStyle}" Text="Loading..."/>
            </StackPanel>
        </Border>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        
        <!-- Tool Information -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Generate 3D View References" Style="{StaticResource HeaderTextBlockStyle}"/>
            <TextBlock Text="This tool places 3D View Reference families at the location and extent of selected views." 
                       Style="{StaticResource BodyTextBlockStyle}" Margin="0,5,0,0"/>
        </StackPanel>
        
        <!-- View Categories -->
        <GroupBox Grid.Row="1" Header="View Categories" Style="{StaticResource StandardGroupBoxStyle}">
            <WrapPanel x:Name="viewCategoriesPanel" Orientation="Horizontal" Margin="5">
                <!-- View category checkboxes will be added here programmatically -->
            </WrapPanel>
        </GroupBox>
        
        <!-- Views List -->
        <Grid Grid.Row="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            
            <!-- DataGrid Header -->
            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <CheckBox x:Name="selectAllCheckbox" Grid.Column="0" Content="Select All" 
                          Checked="SelectAll_Checked" Unchecked="SelectAll_Unchecked" />
            </Grid>
            
            <!-- DataGrid with Views -->
            <DataGrid x:Name="viewsDataGrid" Grid.Row="1" Style="{StaticResource StandardDataGridStyle}"
                      SelectionMode="Extended" IsReadOnly="False">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="Select" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding IsSelected, UpdateSourceTrigger=PropertyChanged}" 
                                          HorizontalAlignment="Center" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="View Name" Binding="{Binding ViewName}" Width="*" />
                    <DataGridTextColumn Header="View Category" Binding="{Binding ViewCategory}" Width="*" />
                    <DataGridTextColumn Header="View Scale" Binding="{Binding ViewScale}" Width="*" />
                    <DataGridTextColumn Header="Sheet Reference" Binding="{Binding SheetReference}" Width="*" />
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
        
        <!-- Action Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button x:Name="createButton" Content="Create 3D View References" Click="CreateViewReferences_Click" Style="{StaticResource StandardButtonStyle}"/>
            <Button x:Name="isolateButton" Content="Isolate x created elements" Click="IsolateElements_Click" 
                    IsEnabled="False" Style="{StaticResource SecondaryButtonStyle}"/>
            <Button x:Name="cancelButton" Content="Cancel" Click="Cancel_Click" Style="{StaticResource SecondaryButtonStyle}"/>
        </StackPanel>
    </Grid>
</Window>